# 7.2 ì¸í„°í˜ì´ìŠ¤ì˜ ë¶„ë¦¬ì™€ ìê¸°ì°¸ì¡° ë¹ˆ
- SqlService ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ ë°©ë²•ì„ ê³ ë¯¼í•´ë³¸ë‹¤.
- êµ¬í˜„ ë°©ë²•ê³¼ í™•ì¥ ê°€ëŠ¥ì„±ì— ë”°ë¼ ìœ ì—°í•œ ë°©ë²•ìœ¼ë¡œ ì¬êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•  í•„ìš”ê°€ ìˆë‹¤.

<br/>

## 7.2.1 XML íŒŒì¼ ë§¤í•‘
- SQLì„ ì €ì¥í•´ë‘ëŠ” ì „ìš© í¬ë§·ì„ ê°€ì§„ ë…ë¦½ì ì¸ íŒŒì¼ì„ ì´ìš©í•˜ëŠ” í¸ì´ ë°”ëŒì§í•˜ë‹¤.

<br/>

### JAXB
- XML ë¬¸ì„œì •ë³´ë¥¼ ê±°ì˜ ë™ì¼í•œ êµ¬ì¡°ì˜ ì˜¤ë¸Œì íŠ¸ë¡œ ì§ì ‘ ë§¤í•‘í•´ì¤€ë‹¤.
- ë§¤í•‘í•  ì˜¤ë¸Œì íŠ¸ì˜ í´ë˜ìŠ¤ê¹Œì§€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì»´íŒŒì¼ëŸ¬ë„ ì œê³µí•œë‹¤.

<br/>

<img width="550" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/a302b338-5d15-4ce1-bb3f-c1e78853d16d">

ğŸ”¼ JAXB ë™ì‘ë°©ì‹

<br/>

### SQL ë§µì„ ìœ„í•œ ìŠ¤í‚¤ë§ˆ ì‘ì„±ê³¼ ì»´íŒŒì¼

```xml
<sqlmap>
	<sql key="userAdd">insert into users(id, name, password, email, level, login, recommend) values (?,?,?,?,?,?,?)</sql>
	<sql key="userGet">select * from users where id = ?</sql>
	...
</sqlmap>
```
ğŸ”¼ SQL ë§µ XML ë¬¸ì„œ
- í‚¤ì™€ SQL ì •ë³´ë¥¼ ë‹´ì€ <sql> íƒœê·¸ë¥¼ ê°€ì§„ XML ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤.

<br/>

<img width="550" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/26fc0a21-212c-4757-887d-f9b909f4f0e4">

<img width="550" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/dd982a4b-934c-456e-ad8a-0bd5a3d1602a">

ğŸ”¼ SQL ë§µ ë¬¸ì„œì— ëŒ€í•œ ìŠ¤í‚¤ë§ˆ
- XML ë¬¸ì„œ êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê³  ìˆëŠ” XML ìŠ¤í‚¤ë§ˆì´ë‹¤.

<br/>

```
xjc -p com.example.tobyspringexperience.sql.jaxb sqlmap.xsd -d src
```
ğŸ”¼ ì»´íŒŒì¼
- `com.example.tobyspringexperience.sql.jaxb` : ìƒì„±í•  í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ ì§€ì •
- `sqlmap.xsd` : ë³€í™˜í•  ìŠ¤í‚¤ë§ˆ íŒŒì¼
- `src` : ìƒì„±ëœ íŒŒì¼ì´ ì €ì¥ë  ìœ„ì¹˜ë¡œ, ì†ŒìŠ¤ í´ë”ì— ì¶”ê°€í•´ì¤€ë‹¤.
- ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ 2ê°œì˜ ë°”ì¸ë”©ìš© ìë°” í´ë˜ìŠ¤ì™€ íŒ©í† ë¦¬ í´ë˜ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ë‹¤.

<br/>

```java
// ë³€í™˜ ì‘ì—…ì—ì„œ ì°¸ê³ í•  ì •ë³´ë¥¼ ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê°–ê³  ìˆë‹¤.
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sqlmapType", propOrder = { "sql" })
@XmlRootElement(name = "sqlmap")
public class Sqlmap {

	@XmlElement(required = true)
	protected List<SqlType> sql; // <sql> íƒœê·¸ì˜ ì •ë³´ë¥¼ ë‹´ì€ SqlType ì˜¤ë¸Œì íŠ¸ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ê°–ê³  ìˆë‹¤.
	
	public List<SqlType> getSql() {
		if (Objects.isNull(sql)) {
			sql = new ArrayList<>();
		}
		return this.sql;
	}
}
```
ğŸ”¼ SqlmapType í´ë˜ìŠ¤
- <sqlmap>ì´ ë°”ì¸ë”©ë  í´ë˜ìŠ¤ì´ë‹¤.

<br/>

```java
@Getter
@Setter
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sqlmapType", propOrder = { "value" })
public class SqlType { // <sql> íƒœê·¸ í•œ ê°œë‹¹ SqlType ì˜¤ë¸Œì íŠ¸ê°€ í•˜ë‚˜ì”© ë§Œë“¤ì–´ì§„ë‹¤.
	
	@XmlValue
	protected String value; // SQL ê°’ì„ ì €ì¥í•  ìŠ¤íŠ¸ë¦½ íƒ€ì…ì˜ í•„ë“œ
	
	@XmlAttribute(required = true)
	protected String key; // key ì• íŠ¸ë¦¬ë·°íŠ¸ì— ë‹´ê¸´ ê²€ìƒ‰ìš© í‚¤ ê°’ì„ ìœ„í•œ ìŠ¤íŠ¸ë§ íƒ€ì…ì˜ í•„ë“œ
}
```
ğŸ”¼ SqlType í´ë˜ìŠ¤
- <sql> íƒœê·¸ì˜ ì •ë³´ë¥¼ ë‹´ì„ í´ë˜ìŠ¤ì´ë‹¤.

<br/>

### ì–¸ë§ˆìƒ¬ë§
- í•™ìŠµ í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ë³¸ë‹¤.
- ì–¸ë§ˆìƒ¬ë§: XML ë¬¸ì„œë¥¼ ì½ì–´ì„œ ìë°”ì˜ ì˜¤ë¸Œì íŠ¸ë¡œ ë³€í™˜ë˜ëŠ” ê²ƒ
- ë§ˆìƒ¬ë§: ë°”ì¸ë”© ì˜¤ë¸Œì íŠ¸ë¥¼ XML ë¬¸ì„œë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ

<br/>

<img width="493" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/5536df8e-19b4-467f-9fc4-c9bab1426858">

ğŸ”¼ í…ŒìŠ¤íŠ¸ìš© SQL ë§µ XML ë¬¸ì„œ

<br/>

```java
public class JaxbTest {
	
	@Test
	public void readSqlmap() throws JAXBException, IOException {
		String contextPath = Sqlmap.class.getPackage().getName();
		JAXBContext context = JAXBContext.newInstance(contextPath); // ë°”ì¸ë”©ìš© í´ë˜ìŠ¤ë“¤ ìœ„ì¹˜ë¥¼ ê°€ì§€ê³  JAXB ì»¨í…ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤.
		Unmarshaller unmarshaller = context.createUnmarshaller(); // ì–¸ë§ˆìƒ¬ëŸ¬ ìƒì„±
		
		Sqlmap sqlmap = (Sqlmap) unmarshaller.unmarshal( // ì–¸ë§ˆìƒ¬ì„ í•˜ë©´ ë§¤í•‘ëœ ì˜¤ë¸Œì íŠ¸ íŠ¸ë¦¬ì˜ ë£¨íŠ¸ì¸ Sqlmapì„ ëŒë ¤ì¤€ë‹¤.
				getClass().getResourceAsStream("sqlmap.xml") // í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì™€ ê°™ì€ í´ë”ì— ìˆëŠ” XML íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤.
		);

		List<SqlType> sqlList = sqlmap.getSql();
		
		// Listì— ë‹´ê²¨ ìˆëŠ” Sql ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ì ¸ì™€ XML ë¬¸ì„œì™€ ê°™ì€ ì •ë³´ë¥¼ ê°–ê³  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
		assertThat(sqlList.size(), is(3));
		assertThat(sqlList.get(0).getKey(), is("add"));
		assertThat(sqlList.get(0).getValue(), is("insert"));
		assertThat(sqlList.get(1).getKey(), is("get"));
		assertThat(sqlList.get(1).getValue(), is("select"));
		assertThat(sqlList.get(2).getKey(), is("delete"));
		assertThat(sqlList.get(2).getValue(), is("delete"));
	}
}
```
ğŸ”¼ JAXB í•™ìŠµ í…ŒìŠ¤íŠ¸

<br/>

## 7.2.2 XML íŒŒì¼ì„ ì´ìš©í•˜ëŠ” SQL ì„œë¹„ìŠ¤
- sqlServiceì— ì ìš©í•´ë³´ì.

<br/>

### SQL ë§µ XML íŒŒì¼
```xml
â€¹?xml versoin="1.0" encodinq="UTF-8"?>
<sqlmap xmlns="http://www.epril.com/sqlmap" 
        xmlns="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.epril.com/sqlmap http://www.epril.com/sqlmap/sqlap.xsd">
    <sqlmap>
        <sql key="userAdd">insert into users(id, name, password, email, level, login, recommend) values (?,?,?,?,?,?,?)</sql>
        <sql key="userGet">select * from users where id = ?</sql>
        <sql key="userGetAll">select * from users order by id</sql>
        <sql key="userDeleteAll">delete from users</sql>
        <sql key="userGetCount">select count(*) from users</sql>
        <sql key="userUpdate">update users set name = ?, password = ?, email = ?, level = ?, login = ?, recommend = ? where id = ?</sql>
    </sqlmap>
</sqlmap>
```
ğŸ”¼ SQL ë§µ XML ë¬¸ì„œ
- SQLì€ DAO ë¡œì§ì˜ ì¼ë¶€ë¼ê³  ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ DAOì™€ ê°™ì€ íŒ¨í‚¤ì§€ì— ë‘ëŠ” ê²Œ ì¢‹ë‹¤.

<br/>

### XML SQL ì„œë¹„ìŠ¤
- SqlService ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³¸ë‹¤.
- ê°€ëŠ¥í•œ í•œ XML íŒŒì¼ì€ í•œ ë²ˆë§Œ ì½ë„ë¡ í•´ì•¼ í•œë‹¤.

<br/>

```java
public class XmlSqlService implements SqlService {
	
	private Map<String, String> sqlMap = new HashMap<String, String>(); // ì½ì–´ì˜¨ SQLì„ ì €ì¥í•´ë‘˜ ë§µ
	
	// ìŠ¤í”„ë§ì´ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“œëŠ” ì‹œì ì—ì„œ SQLì„ ì½ì–´ì˜¤ë„ë¡ ìƒì„±ìë¥¼ ì´ìš©í•œë‹¤.
	public XmlSqlService() {
		// JAXB APIë¥¼ ì´ìš©í•´ XML ë¬¸ì„œë¥¼ ì˜¤ë¸Œì íŠ¸ íŠ¸ë¦¬ë¡œ ì½ì–´ì˜¨ë‹¤.
		String contextPath = Sqlmap.class.getPackage().getName();
		try {
			JAXBContext context = JAXBContext.newInstance(contextPath);
			Unmarshaller unmarshaller = context.createUnmarshaller();
			InputStream is = UserDao.class.getResourceAsStream("sqlmap.xml"); // UserDaoì™€ ê°™ì€ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ sqlmap.xml íŒŒì¼ì„ ë³€í™˜í•œë‹¤.
			Sqlmap sqlmap = (Sqlmap)unmarshaller.unmarshal(is);
			
			// ì½ì–´ì˜¨ SQLì„ ë§µìœ¼ë¡œ ì €ì¥í•´ë‘”ë‹¤.
			for (SqlType sql : sqlmap.getSql()) {
				sqlMap.put(sql.getKey(), sql.getValue());
			}
		} catch (JAXBException e) {
			throw new RuntimeException(e); // ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸ì´ë¯€ë¡œ ë¶ˆí•„ìš”í•œ throwsë¥¼ í”¼í•˜ë„ë¡ ëŸ°íƒ€ì„ ì˜ˆì™¸ë¡œ í¬ì¥í•´ì„œ ë˜ì§„ë‹¤.
		}
	}
	
	@Override
	public String getSql(String key) throws SqlRetrievalFailureException {
		String sql = sqlMap.get(key);
		if (Objects.isNull(sql)) {
			throw new SqlRetrievalFailureException(key + "ë¥¼ ì´ìš©í•´ì„œ SQLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
		} else {
			return sql;
		}
	}
}
```
ğŸ”¼ ìƒì„±ì ì´ˆê¸°í™” ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” XmlSqlService í´ë˜ìŠ¤
- DAO ìš”ì²­ì— ë”°ë¼ SQLì„ ì°¾ì•„ì„œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ SqlServiceë¥¼ êµ¬í˜„í–ˆë‹¤.

<br/>

```xml
<bean id="sqlService" class="com.example.tobyspringexperience.sql.service.XmlSqlService">
</bean>
```
ğŸ”¼ sqlService ì„¤ì • ë³€ê²½

<br/>

> ***ê²°ê³¼***

- ğŸŒ• ê¹”ë”í•œ XML ë¬¸ì„œì´ë¯€ë¡œ ì‘ì„±í•˜ê³  ê²€ì¦í•˜ê¸°ì— í¸ë¦¬í•˜ë‹¤.
- ğŸŒ• í•„ìš”í•˜ë‹¤ë©´ ë‹¤ë¥¸ íˆ´ì—ì„œë„ ë¶ˆëŸ¬ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ğŸŒ• SQL ë¦¬ë·°ë‚˜ íŠœë‹ì´ í•„ìš”í•˜ë‹¤ë©´ sqlmap.xml íŒŒì¼ë§Œ ì œê³µí•´ì£¼ë©´ ëœë‹¤.
- ğŸŒ• SQL ë‚´ìš©ì„ ë³€ê²½í•˜ë”ë¼ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì½”ë“œë‚˜ DI ì„¤ì •ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

<br/>

## 7.2.3 ë¹ˆì˜ ì´ˆê¸°í™” ì‘ì—…
- ìƒì„±ìì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆëŠ” ë³µì¡í•œ ì´ˆê¸°í™” ì‘ì—…ì„ ë‹¤ë£¨ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤.
- ì½ì–´ë“¤ì¼ íŒŒì¼ì˜ ìœ„ì¹˜ì™€ ì´ë¦„ì´ ì½”ë“œì— ê³ ì •ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ ì¢‹ì§€ ì•Šë‹¤.

<br/>

```java
private String sqlmapFile;
	
public void setSqlmapFile(String sqlmapFile) {
	this.sqlmapFile = sqlmapFile;
}
```
ğŸ”¼ SQL ë§µ íŒŒì¼ ì´ë¦„ í”„ë¡œí¼í‹°
- íŒŒì¼ ì´ë¦„ì„ ì™¸ë¶€ì—ì„œ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

<br/>

```java
private void loadSql() {
	String contextPath = Sqlmap.class.getPackage().getName();
	try {
		...
		InputStream is = UserDao.class.getResourceAsStream(this.sqlmapFile); // í”„ë¡œí¼í‹°ë¡œ ì„¤ì •ì„ í†µí•´ ì œê³µë°›ì€ íŒŒì¼ ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.
		...
	}
}
```
ğŸ”¼ ìƒì„±ì ëŒ€ì‹  ì‚¬ìš©í•  ì´ˆê¸°í™” ë©”ì„œë“œ
- ìƒì„±ìì—ì„œ ì§„í–‰í•˜ë˜ ì‘ì—…ì„ ë³„ë„ì˜ ì´ˆê¸°í™” ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ì˜®ê¸´ë‹¤.

<br/>

```java
XmlSqlService sqlProvider = new XmlSqlService();
sqlProvider.setSqlmapFile("sqlmap.xml");
sqlProvider.loadSql();
```
ğŸ”¼ XmlSqlService ì˜¤ë¸Œì íŠ¸ì˜ ì´ˆê¸°í™” ë°©ë²•
- ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“œëŠ” ì‹œì ì—ì„œ ì´ˆê¸°í™” ë©”ì„œë“œë¥¼ í•œ ë²ˆ í˜¸ì¶œí•´ì¤€ë‹¤. (XmlSqlService ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ì œì–´ê¶Œì´ ì½”ë“œì— ìˆë‹¤ë©´)

<br/>

<img width="675" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/4c9bdb8b-69f8-4066-8596-7d9d8032f62a">

ğŸ”¼ context ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸ê³¼ annotation-config íƒœê·¸ ì„¤ì •
- aop.txì™€ í•¨ê»˜ context ìŠ¤í‚¤ë§ˆì˜ íƒœê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•´ì¤€ ì„¤ì •íŒŒì¼ì˜ ì•ë¶€ë¶„ì´ë‹¤.

<br/>

```java
public class XmlSqlService implements SqlService {
	...
	@PostConstruct // loadSql() ë©”ì„œë“œë¥¼ ë¹ˆì˜ ì´ˆê¸°í™” ë©”ì„œë“œë¡œ ì§€ì •í•œë‹¤.
	public void loadSql() { ... }
}
```
ğŸ”¼ @PostConstruct ì´ˆê¸°í™” ë©”ì„œë“œ
- ìŠ¤í”„ë§ì€ XmlSqlService í´ë˜ìŠ¤ë¡œ ë“±ë¡ëœ ë¹ˆì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  DI ì‘ì—…ì„ ë§ˆì¹œ ë’¤ @PostContextê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•´ì¤€ë‹¤.

<br/>

```java
<bean id="sqlService" class="springbook.user.sqlservice.XmlSqlService">
	<property name="sqlmapFile" value="sqlmap.xml"/>
</bean>
```
ğŸ”¼ sqlmapFile í”„ë¡œí¼í‹° ì¶”ê°€
- sqlmapFile í”„ë¡œí¼í‹°ì˜ ê°’ì„ sqlService ë¹ˆì˜ ì„¤ì •ì— ë„£ì–´ì¤€ë‹¤.

<br/>

<img width="641" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/0dc0aeb7-8721-44e9-aaaf-0711afd26c2e">

ğŸ”¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì´ˆê¸° ì‘ì—… ìˆœì„œ
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ê°€ XML ì„¤ì •íŒŒì¼ì„ ì½ê³  ì§„í–‰í•˜ëŠ” ì‘ì—…ì˜ ìˆœì„œë¥¼ ë³´ì—¬ì¤€ë‹¤.
- @PostConstructë¥¼ ë‹¨ ë©”ì„œë“œì˜ ì½”ë“œëŠ” ëª¨ë“  í”„ë¡œí¼í‹°ì˜ ê°’ì´ ì¤€ë¹„ëë‹¤ê³  ê°€ì •í•˜ê³  ì‘ì„±í•˜ë©´ ëœë‹¤.

<br/>

## 7.2.4 ë³€í™”ë¥¼ ìœ„í•œ ì¤€ë¹„: ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬
- ì„œë¡œ ê´€ì‹¬ì´ ë‹¤ë¥¸ ì½”ë“œë“¤ì„ ë¶„ë¦¬í•˜ê³ , ì„œë¡œ ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©´ì„œ ìœ ì—°í•˜ê²Œ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ DIë¥¼ ì ìš©í•´ë³´ì.

<br/>

### ì±…ì„ì— ë”°ë¥¸ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- SQL ì •ë³´ë¥¼ ì™¸ë¶€ì˜ ë¦¬ì†ŒìŠ¤ë¡œë¶€í„° ì½ì–´ì˜¨ë‹¤.
- ì½ì–´ì˜¨ SQLì„ ë³´ê´€í•´ë‘ê³  ìˆë‹¤ê°€ í•„ìš”í•  ë•Œ ì œê³µí•´ì¤€ë‹¤.

<br/>

<img width="640" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/bf7bd700-4f0b-4bd3-a7a6-3983b24b2576">

ğŸ”¼ SqlService ì„œë¹„ìŠ¤ ì˜¤ë¸Œì íŠ¸ êµ¬ì¡°
- SqlServiceì˜ êµ¬í˜„ í´ë˜ìŠ¤ê°€ ë³€ê²½ ê°€ëŠ¥í•œ ì±…ì„ì„ ê°€ì§„ SqlReaderì™€ SqlRegistry ë‘ ê°€ì§€ íƒ€ì…ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“ ë‹¤.
- SQLì„ ëŸ°íƒ€ì„ ì‹œì— ë³€ê²½í•˜ë„ë¡ ìš”ì²­í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ê°€ í•„ìš”ì— ë”°ë¼ ì´ë¥¼ í˜¸ì¶œí•´ì„œ SQLì„ ê°±ì‹ í•˜ë„ë¡ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.

<br/>

```java
Map<String, String> sqls = sqlReader.readSql(); // Mapì´ë¼ëŠ” êµ¬ì²´ì ì¸ ì „ì†¡ íƒ€ì…ì„ ê°•ì œí•˜ê²Œ í•œë‹¤.
sqlRegistry.addSqls(sqls);
```
ğŸ”¼ SqlService êµ¬í˜„ í´ë˜ìŠ¤ ì½”ë“œ
- SqlReaderê°€ ë¦¬ì†ŒìŠ¤ë¡œë¶€í„° ì½ì–´ì˜¨ SQL ì •ë³´ë¥¼ ë§µìœ¼ë¡œ ëŒë ¤ì¤€ë‹¤ê³  ì •ì˜í•œë‹¤.

<br/>

```java
sqlReader.readSql(sqlRegistry); // SQLì„ ì €ì¥í•  ëŒ€ìƒì¸ sqlRegistry ì˜¤ë¸Œì íŠ¸ë¥¼ ì „ë‹¬í•œë‹¤.
```
ğŸ”¼ ë³€ê²½ëœ SqlService ì½”ë“œ
- SqlReaderì—ê²Œ SqlRegistry ì „ëµì„ ì œê³µí•´ì£¼ë©´ì„œ ì´ë¥¼ ì´ìš©í•´ SQL ì •ë³´ë¥¼ SqlRegistryì— ì €ì¥í•˜ë¼ê³  ìš”ì²­í•œë‹¤.

<br>

```java
interface SqlRegistry {
	void registerSql(String key, String sql); // SqlReaderëŠ” ì½ì–´ë“¤ì¸ SQLì„ ì´ ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì €ì¥í•œë””.
}
```
ğŸ”¼ ë“±ë¡ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” SqlRegistry ë©”ì„œë“œ
- sqlRegistryê°€ êµ¬í˜„í•œ ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ë“±ë¡ì„ ìœ„í•œ ë©”ì„œë“œë¥¼ ì œê³µí•´ì¤€ë‹¤.

<br/>

<img width="371" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/2b5c9c5d-8cfe-4fa6-a186-829f17b30d68">

ğŸ”¼ SqlRegistryì— ì˜ì¡´í•˜ëŠ” SqlReader êµ¬ì¡°
- SqlReaderê°€ SqlRegitryì™€ ì˜ì¡´ê´€ê³„ë¥¼ ê°€ì§€ê³  ì‘ì—…ì„ ì§„í–‰í•˜ë„ë¡ ë§Œë“¤ì—ˆì„ ë•Œì˜ êµ¬ì¡°

<br/>

### SqlRegistry ì¸í„°í˜ì´ìŠ¤
```java
package springbook.user.sqlservice;
...

public interface SqlRegistry {
	void registerSql(String key, String sql); // SQLì„ í‚¤ì™€ í•¨ê»˜ ë“±ë¡í•œë‹¤.

	String findSql(String key) throws SqlNotFoundException; // í‚¤ë¡œ SQLì„ ê²€ìƒ‰í•œë‹¤. ê²€ìƒ‰ì´ ì‹¤íŒ¨í•˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.
}
```
ğŸ”¼ SqlRegistry ì¸í„°í˜ì´ìŠ¤
- SQLì„ ì œê³µë°›ì•„ ë“±ë¡í•´ë’€ë‹¤ê°€ í‚¤ë¡œ ê²€ìƒ‰í•´ì„œ ëŒë ¤ì¤€ë‹¤.

<br/>

### SqlReader ì¸í„°í˜ì´ìŠ¤
```java
public interface SqlReader {
	void read(SqlRegistry sqlRegistry); // SQLì„ ì™¸ë¶€ì—ì„œ ê°€ì ¸ì™€ SqlRegistryì— ë“±ë¡í•œë‹¤. ë‹¤ì–‘í•œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆê² ì§€ë§Œ ëŒ€ë¶€ë¶„ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸ì´ë¯€ë¡œ êµ³ì´ ì—ì™¸ë¥¼ ì„ ì–¸í•´ë‘ì§€ ì•Šì•˜ë‹¤.
}
```
ğŸ”¼ SqlReader ì¸í„°í˜ì´ìŠ¤
- SqlRegistry ì˜¤ë¸Œì íŠ¸ë¥¼ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ DI ë°›ì•„ì„œ ì½ì–´ë“¤ì¸ SQLì„ ë“±ë¡í•˜ëŠ” ë° ì‚¬ìš©í•˜ë„ë¡ ë§Œë“ ë‹¤.

<br/>

## 7.2.5 ìê¸°ì°¸ì¡° ë¹ˆìœ¼ë¡œ ì‹œì‘í•˜ê¸°
### ë‹¤ì¤‘ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ê³¼ ê°„ì ‘ ì°¸ì¡°

<img width="585" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/d489db47-8689-4f3c-9202-25685885d057">

ğŸ”¼ SqlService ì„œë¹„ìŠ¤ì˜ í´ë˜ìŠ¤ì™€ ì˜ì¡´ê´€ê³„
- ì‚¬ìš©í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ê°€ í´ë˜ìŠ¤ë¡œë¶€í„° ë§Œë“¤ì–´ì§„ ê²ƒì¸ì§€ ê´€ì‹¬ë„ ì—†ê³  ì•Œ í•„ìš”ë„ ì—†ë‹¤.

<br/>

<img width="628" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/b2de51f6-1c83-4c42-994a-6c204b6fcedb">

ğŸ”¼ 3ê°œì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” XmlSqlService
- ê°™ì€ í´ë˜ìŠ¤ì˜ ì½”ë“œì´ì§€ë§Œ ì±…ì„ì´ ë‹¤ë¥¸ ì½”ë“œëŠ” ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ ë³€ê²½í•œë‹¤.

<br/>

### ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œ ë¶„ë¦¬
```java
public class XmlSqlService implements SqlService {

	// ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ DI ë°›ì„ ìˆ˜ ìˆë„ë¡ ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•´ë‘”ë‹¤.
	private SqlReader sqlReader;
	private SqlRegistry sqlRegistry;

	public void setSqlReader(SqlReader sqlReader) {
		this.sqlReader = sqlReader;
	}

	public void setSqlRegistry(SqlRegistry sqlRegistry) {
		this.sqlRegistry = sqlRegistry;
	}
}
```
ğŸ”¼ SqlServiceì˜ DI ì½”ë“œ
- DIë¥¼ í†µí•´ 2ê°œì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ì£¼ì…ë°›ì„ ìˆ˜ ìˆë„ë¡ í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•œë‹¤.

<br/>

```java
public class XmlSqlService implements SqlService, SqlRegistry {
	private Map<String, String> sqlMap = new HashMap<String, String>(); // sqlMapì€ SqlRegistry êµ¬í˜„ì˜ ì¼ë¶€ê°€ ëœë‹¤. ë”°ë¼ì„œ ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

	public String findSql(String key) throws SqlNotFoundException {
		String sql = sqlMap.get(key);
		if (sql == null) throw new SqlNotFoundException(key + "ì— ëŒ€í•œ SQLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
		else return sql;
	}

	public void registerSql(String key, String sql) { // HashMapì´ë¼ëŠ” ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬ì²´ì ì¸ êµ¬í˜„ ë°©ë²•ì—ì„œ ë…ë¦½ë  ìˆ˜ ìˆë„ë¡ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œë¡œ ì ‘ê·¼í•˜ê²Œ í•´ì¤€ë‹¤.
		sqlMap.put(key, sql);
	}
	...
}
```
ğŸ”¼ SqlRegistryì˜ êµ¬í˜„ ë¶€ë¶„
- sqlMapì€ SqlRegistry êµ¬í˜„ ë©”ì„œë“œê°€ ì•„ë‹Œ ë©”ì„œë“œì—ì„œëŠ” ì§ì ‘ ì‚¬ìš©í•´ì„œëŠ” ì•ˆëœë‹¤.
- ë…ë¦½ì ì¸ ì˜¤ë¸Œì íŠ¸ë¼ê³  ìƒê°í•˜ê³  SqlRegistryì˜ ë©”ì„œë“œë¥¼ í†µí•´ ì ‘ê·¼í•´ì•¼ í•œë‹¤.

<br/>

```java
public class XmlSqlService implements SqlService, SqlRegistry, SqlReader {
	...

	// sqlMapFileì€ SqlReader êµ¬í˜„ì˜ ì¼ë¶€ê°€ ëœë‹¤. ë”°ë¼ì„œ SqlReader êµ¬í˜„ ë©”ì„œë“œë¥¼ í†µí•˜ì§€ ì•Šê³ ëŠ” ì ‘ê·¼í•˜ë©´ ì•ˆ ëœë‹¤.
	private String sqlmapFile;
	public void setSqlmapFile(String sqlmapFile) {
		this.sqlmapFile = sqlmapFile;
	}

	public void read(SqlRegistry sqlRegistry) { // loadSql()ì— ìˆë˜ ì½”ë“œë¥¼ SqlReader ë©”ì„œë“œë¡œ ê°€ì ¸ì˜¨ë‹¤. ì´ˆê¸°í™”ë¥¼ ìœ„í•´ ë¬´ì—‡ì„ í•  ê²ƒì¸ê°€ì™€ SQLì„ ì–´ë–»ê²Œ ì½ëŠ”ì§€ë¥¼ ë¶„ë¦¬í•œë‹¤.
		String contextPath = JAXBContext.newInstance(contextPath);
		try {
			JAXBContext context = JAXBContext.newInstance(contextPath);
			Unmarshaller unmarshaller = context.createUnmarshaller();
			InputStream is = UserDao.class.getResourceAsStream(sqlmapFile);
			Sqlmap sqlmap = (Sqlmap)unmarshaller.unmarshal(is);
			for(SqlType sql : sqlmap.getSql()) {
				sqlRegistry.registerSql(sql.getKey(), sql.getValue()); // SQL ì €ì¥ ë¡œì§ êµ¬í˜„ì— ë…ë¦½ì ì¸ ì¸í„°í˜ì´ìŠ¤ ë©”ì„œë“œë¥¼ í†µí•´ ì½ì–´ë“¤ì¸ SQLê³¼ í‚¤ë¥¼ ì „ë‹¬í•œë‹¤.
			}
		} catch (JAXBException e) {
			throw new RuntimeException(e);
		}
	}
}
```
ğŸ”¼ SqlReaderì˜ êµ¬í˜„ ë¶€ë¶„
- XmlSqlService ë‚´ì˜ ë‹¤ë¥¸ ë³€ìˆ˜ì™€ ë©”ì„œë“œë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ê±°ë‚˜ ì‚¬ìš©í•˜ë©´ ì•ˆ ëœë‹¤.
- í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì ì ˆí•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì ‘ê·¼í•˜ë„ë¡ í•œë‹¤.

<br/>

```java
publi class XmlSqlService implements SqlService, SqlRegistry, SqlReader {
	...
	@PostConstruct
	public void loadSql() {
		this.sqlReader.read(this.sqlRegistry);
	}

	public String getSql(String key) throws SqlRetrievalFailureException {
		try {
			return this.sqlRegistry.findSql(key);
		} catch(SqlNotFoundException e) {
			throw new SqlRetrievalFailureException(e);
		}
	}
```
ğŸ”¼ SqlService ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ë¶€ë¶„
- @PostConstructê°€ ë‹¬ë¦° ë¹ˆ ì´ˆê¸°í™” ë©”ì„œë“œì™€ SqlService ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ ë©”ì„œë“œì¸ getFinder()ë¥¼ sqlReaderì™€ sqlRegistryë¥¼ ì´ìš©í•˜ë„ë¡ í•œë‹¤.

<br/>

### ìê¸°ì°¸ì¡° ë¹ˆ ì„¤ì •

<img width="643" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/6ff42a62-f839-445c-bcd1-f672b3895c99">

ğŸ”¼ ìì‹ ì„ ì°¸ì¡°í•˜ëŠ” sqlService ë¹ˆ ì„¤ì •
- ë§ˆì¹˜ 3ê°œì˜ ë¹ˆì´ ë“±ë¡ëœ ê²ƒì²˜ëŸ¼ SqlService ë¹ˆì´ SqlRegistryì™€ SqlReaderë¥¼ ì£¼ì…ë°›ë„ë¡ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

<br/>

## 7.2.6 ë””í´íŠ¸ ì˜ì¡´ê´€ê³„
- ë¶„ë¦¬í•˜ê³  DIë¡œ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

<br/>

### í™•ì¥ ê°€ëŠ¥í•œ ê¸°ë°˜ í´ë˜ìŠ¤
```java
package springbook.user.sqlservice;
...
public class BaseSqlService implements SqlService {
	// BaseSqlServiceëŠ” ìƒì†ì„ í†µí•´ í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•˜ë‹¤. ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ í•„ìš”í•œ ê²½ìš° ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ protectedë¡œ ì„ ì–¸í•œë‹¤.
	protected SqlReader sqlReader;
	protected SqlRegistry sqlRegistry;

	public void setSqlReader(SqlReader sqlReader) { this.sqlReader = sqlReader; }
	public void setSqlRegistry(SqlRegistry sqlRegistry) { this.sqlRegistry = sqlRegistry; }

	@PostConstruct
	public void loadSql() {
		this.sqlReader.read(this.sqlRegistry);
	}

	public String getSql(String key) throws SqlRetrievalFailureException {
		try { return this.sqlRegistry.findSql(key); }
		catch(SqlNotFoundException e) { throw new SqlRetrievalFailureException(e); }
	}
}
```
ğŸ”¼ SqlReaderì™€ SqlRegistryë¥¼ ì‚¬ìš©í•˜ëŠ” SqlService êµ¬í˜„ í´ë˜ìŠ¤
- BaseSqlServiceë¥¼ sqlService ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  SqlReaderì™€ SqlRegistryë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ì—­ì‹œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ DIí•´ì£¼ë©´ ëœë‹¤.

<br/>

```java
package springbook.user.sqlservice;
...
public class HashMapSqlRegistry implements SqlRegistry {
	private Map<String, String> sqlMap = new HashMap<String, String>();

	public String findSql(String key) throws SqlNotFoundException {
		String sql = sqlMap.get(key);
		if (sql == null) {
			throw new SqlNotFoundException(key + "ë¥¼ ì´ìš©í•´ì„œ SQLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
		} else return sql;
	}

	public void registerSql(String key, String sql) { sqlMap.put(key, sql); }
}
```
ğŸ”¼ HashMapì„ ì´ìš©í•˜ëŠ” SqlRegistry í´ë˜ìŠ¤
- HashMapì„ ì´ìš©í•´ SQLì„ ì €ì¥í•´ë‘ê³  ì°¾ì•„ì£¼ëŠ” ê¸°ëŠ¥ì„ ë‹´ë‹¹í–ˆë˜ ì½”ë“œë¥¼ SqlRegistryë¥¼ êµ¬í˜„í•˜ëŠ” ë…ë¦½ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•œ ê²ƒì´ë‹¤.

<br/>

```java
package springbook.user.sqlservice;
...
public class JaxbXmlSqlReader implements SqlReader {
	private String sqlmapFile; // sqlmapFileì€ SqlReaderì˜ íŠ¹ì • êµ¬í˜„ ë°©ë²•ì— ì¢…ì†ë˜ëŠ” í”„ë¡œí¼í‹°ê°€ ëœë‹¤.

	public void setSqlmapFile(String sqlmapFile) { this.sqlmapFile = sqlmapFile; }

	public void read(SqlRegistry sqlRegistry) {
		... // XmlSqlServiceì—ì„œ ì‚¬ìš©í–ˆë˜ JAXB APIë¥¼ ì´ìš©í•´ SQLì„ ì½ì–´ì˜¤ëŠ” ì½”ë“œ ìƒëµ
	}
}
```
ğŸ”¼ JAXBë¥¼ ì‚¬ìš©í•˜ëŠ” SqlReader í´ë˜ìŠ¤
- JAXBë¥¼ ì´ìš©í•´ XML íŒŒì¼ì—ì„œ SQL ì •ë³´ë¥¼ ì½ì–´ì˜¤ëŠ” ì½”ë“œë¥¼ SqlReader ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ í´ë˜ìŠ¤ë¡œ ë…ë¦½ì‹œí‚¨ë‹¤.

<br/>

<img width="630" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/21690081-a94b-4681-b7d4-bc4f30be5fd5">

ğŸ”¼ SqlReaderì™€ SqlRegistryì˜ ë…ë¦½ì ì¸ ë¹ˆ ì„¤ì •
- ê¸°ì¡´ì˜ ìì‹ ì„ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆë˜ sqlService ë¹ˆì„ ë³„ë„ë¡œ ë“±ë¡í•œ 2ê°œì˜ ë¹ˆì„ ì°¸ì¡°í•˜ë„ë¡ í•œë‹¤.

<br/>

### ë””í´íŠ¸ ì˜ì¡´ê´€ê³„ë¥¼ ê°–ëŠ” ë¹ˆ ë§Œë“¤ê¸°
- ë””í´íŠ¸ ì˜ì¡´ê´€ê³„: ì™¸ë¶€ì—ì„œ DI ë°›ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ ìë™ ì ìš©ë˜ëŠ” ì˜ì¡´ê´€ê³„

<br/>

```java
package springbook.user.sqlservice;
...

public class DefaultSqlService extends BaseSqlService {
	public DefaultSqlService() {
		// ìƒì„±ìì—ì„œ ë””í´íŠ¸ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ ìŠ¤ìŠ¤ë¡œ DI í•´ì¤€ë‹¤.
		setSqlReader(new JaxbXmlSqlReader());
		setSqlRegistry(new HashMapSqlRegistry());
	}
}
```
ğŸ”¼ ìƒì„±ìë¥¼ í†µí•œ ë””í´íŠ¸ ì˜ì¡´ê´€ê³„ ì„¤ì •
- ë¯¸ë¦¬ ì„¤ì •ëœ ë””í´íŠ¸ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ ê°–ëŠ”ë‹¤.
- ì½”ë“œë¥¼ í†µí•´ ì˜ì¡´ê´€ê³„ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§ì ‘ ì£¼ì…í•´ì£¼ë©´ íŠ¹ë³„íˆ DIê°€ í•„ìš”í•œ ìƒí™©ì´ ì•„ë‹Œ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì—ì„œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br/>

```xml
<bean id="sqlService" class="springbook.user.sqlservice.DefaultSqlService" />
```
ğŸ”¼ ë””í´íŠ¸ ì˜ì¡´ê´€ê³„ ë¹ˆì˜ ì„¤ì •
- 3ê°œì˜ ë¹ˆì„ ì •ì˜í•˜ê³  í”„ë¡œí¼í‹°ë¡œ ì—°ê²°í•´ì•¼ í–ˆë˜ ì„¤ì •ì„ **í•œ ì¤„ë¡œ** ë°”ê¿€ ìˆ˜ ìˆë‹¤.

<br/>

```java
public class JaxbXmlSqlReader implements SqlReader {
	// êµ³ì´ ìƒìˆ˜ë¡œ ë§Œë“¤ì§€ ì•Šê³  ë°”ë¡œ sqlmapFileì˜ ê°’ìœ¼ë¡œ ë„£ì–´ë„ ìƒê´€ì—†ì§€ë§Œ ì´ë ‡ê²Œ í•´ì£¼ë©´ ì˜ë„ê°€ ì½”ë“œì— ë¶„ëª…íˆ ë“œëŸ¬ë‚˜ê³  ì½”ë“œë„ í¼ì´ ë‚œë‹¤.
	private static final String DEFAULT_SQLMAP_FILE = "sqlmap.xml";

	private String sqlmapFile = DEFAULT_SQLMAP_FILE;

	// sqlmapFile í”„ë¡œí¼í‹°ë¥¼ ì§€ì •í•˜ë©´ ì§€ì •ëœ íŒŒì¼ì´ ì‚¬ìš©ë˜ê³ , ì•„ë‹ˆë¼ë©´ ë””í´íŠ¸ë¡œ ë„£ì€ íŒŒì¼ì´ ì‚¬ìš©ëœë‹¤.
	public void setSqlmapFile(String sqlmapFile) { this.sqlmapFile = sqlmapFile; }
	...
}
```
ğŸ”¼ ë””í´íŠ¸ ê°’ì„ ê°–ëŠ” JaxbXmlSqlReader
- JaxbXmlSqlReaderì˜ sqlmapFileì— ë””í´íŠ¸ íŒŒì¼ ì´ë¦„ì„ ë„£ì–´ì¤€ë‹¤.
- í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë³´ë©´ ì„±ê³µí•œë‹¤.

<br/>

```xml
<bean id="sqlService" class="springbook.user.sqlservice.DefaultSqlService" >
	<property name="sqlRegistry" ref="ultraSuperFastSqlRegistry" />
</bean>
```
ğŸ”¼ ë””í´íŠ¸ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ ëŒ€ì‹  ì‚¬ìš©í•  ë¹ˆ ì„ ì–¸
- ë””í´íŠ¸ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ ëŒ€ì‹  ì‚¬ìš©í•˜ê³  ì‹¶ì€ êµ¬í˜„ ì˜¤ë¸Œì íŠ¸ê°€ ìˆë‹¤ë©´ ì„¤ì •ì— í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.

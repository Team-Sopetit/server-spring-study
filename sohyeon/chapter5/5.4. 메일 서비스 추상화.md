## 5.4 ë©”ì¼ ì„œë¹„ìŠ¤ ì¶”ìƒí™”
- ë ˆë²¨ì´ ì—…ê·¸ë ˆì´ë“œë˜ëŠ” ì‚¬ìš©ì¥ê²ŒëŠ” ì•ˆë‚´ ë©”ì¼ì„ ë°œì†¡í•´ì•¼ í•œë‹¤.
  - ì‚¬ìš©ìì˜ ì´ë©”ì¼ ì •ë³´ë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤.
  - UserServiceì˜ upgradeLevel() ë©”ì†Œë“œì— ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤.
 
<br/>

### 5.4.1 JavaMailì„ ì´ìš©í•œ ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥
- DBì˜ User í…Œì´ë¸”ì— email í•„ë“œë¥¼, User í´ë˜ìŠ¤ì— email í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•œë‹¤.

<br/>

> ***JavaMail ë©”ì¼ ë°œì†¡***

ğŸ”½ ë ˆë²¨ ì—…ê·¸ë ˆì´ë“œ ì‘ì—… ë©”ì†Œë“œ ìˆ˜ì •
```java
protected void upgradeLevel(User user) {
  user.upgradeLevel();
  userDao.update(user);
  sendUpgradeEMail(user);
}
```
- ë©”ì¼ ë°œì†¡ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤.

<br/>

ğŸ”½ JavaMailì„ ì´ìš©í•œ ë©”ì¼ ë°œì†¡ ë©”ì†Œë“œ
```java
private void sendUpgradeEMail(User user) {
  Properties props = new Properties();
  props.put("mail.smtp.host", "mail.ksug.org");
  Session s = Session.getInstance(props, null);

  MimeMessage message = new MimeMessage(s);
  try {
    message.setFrom("new InternetAddress("useradmin@ksug.org"));
    message.addRecipient(Message.RecipientType.TO, new InternetAddress(user.getEmail()));
    message.setSubject("Upgrade ì•ˆë‚´");
    message.setText("ì‚¬ìš©ìë‹˜ì´ ë“±ê¸‰ì´ " + user.getLevel().name() + "ë¡œ ì—…ê·¸ë ˆì´ë“œë˜ì—ˆìŠµë‹ˆë‹¤.");

    Transport.send(message);
  } catch (AddressException e) {
    throw new RuntimeException(e);
  } catch (MessagingException e) {
    throw new RuntimeException(e);
  } catch (UnsupportedEncodingException e) {
    throw new RuntimeException(e);
  }
}
```
- JavaMail APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•œë‹¤.

<br/>

### 5.4.2 JavaMailì´ í¬í•¨ëœ ì½”ë“œì˜ í…ŒìŠ¤íŠ¸

- ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸ë€ ì—„ë°€íˆ ë§í•´ì„œ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ë©”ì¼ í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤ê³  ë§¤ë²ˆ ë©”ì¼ ìˆ˜ì‹  ì—¬ë¶€ê¹Œì§€ ì¼ì¼ì´ í™•ì¸í•  í•„ìš”ëŠ” ì—†ê³ , í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ë©”ì¼ ì„œë²„ê¹Œì§€ë§Œ ì˜ ì „ì†¡ë˜ëŠ”ì§€ í™•ì¸í•˜ë©´ ëœë‹¤.

<br/>

ğŸ”½ í…ŒìŠ¤íŠ¸ ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

![image](https://github.com/Team-Sopetit/server-spring-study/assets/55437339/b3ffc922-62aa-4792-aaf8-8eeb0cde6a89)

- ì‹¤ì œ ë©”ì¼ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í…ŒìŠ¤íŠ¸ ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•´ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- í…ŒìŠ¤íŠ¸ ë©”ì¼ ì„œë²„ëŠ” JavaMailê³¼ ì—°ë™í•´ì„œ ë©”ì¼ ì „ì†¡ ìš”ì²­ì„ ë°›ëŠ” ê²ƒê¹Œì§€ë§Œ ë‹´ë‹¹í•œë‹¤.

<br/>

ğŸ”½ í…ŒìŠ¤íŠ¸ìš© JavaMailì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

![image](https://github.com/Team-Sopetit/server-spring-study/assets/55437339/9d2e9f74-df3a-419c-aafe-362ada228d41)

- JavaMail APIë¥¼ í†µí•´ ìš”ì²­ì´ ë“¤ì–´ê°„ë‹¤ëŠ” ë³´ì¥ë§Œ ìˆìœ¼ë©´ êµ³ì´ í…ŒìŠ¤íŠ¸ í•  ë•Œë§ˆë‹¤ JavaMailì„ ì§ì ‘ êµ¬ë™ì‹œí‚¬ í•„ìš”ê°€ ì—†ë‹¤.
- ê°œë°œ ì¤‘ì´ê±°ë‚˜ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•ŒëŠ” JavaMailì„ ëŒ€ì‹ í•  ìˆ˜ ìˆëŠ” ì½”ë“œê°€ ë™ì‘í•˜ë„ë¡ ë§Œë“¤ì–´ë„ ëœë‹¤.
- ë§¤ë²ˆ ê²€ì¦ì´ í•„ìš” ì—†ëŠ” ë¶ˆí•„ìš”í•œ ë©”ì¼ ì „ì†¡ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šì•„ë„ ë˜ê³ , í…ŒìŠ¤íŠ¸ë„ ë§¤ìš° ë¹ ë¥´ê³  ì•ˆì „í•˜ê²Œ ìˆ˜í–‰ë  ìˆ˜ ìˆë‹¤.

<br/>

### 5.4.3 í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤ ì¶”ìƒí™”

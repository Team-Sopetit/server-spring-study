# 9.2 개발도구와 환경

## 9.2.1 JavaSE와 JavaEE

### JavaSE/JDK
- 스프링 3.0은 기본적으로 JDK 5.0 또는 그 이상을 필요로 한다.
- 스프링 3.0을 사용하기 위해서는 JDK 5.0 또는 그 이후 버전으로 업그레이드해야 한다.

<br/>

### JavaEE/J2EE
- 스프링 3.0이 사용된 자바 엔터프라이즈 플랫폼으로는 J2EE 1.4 버전 또는 JavaEE 5.0이 필요하다.

<br/>

## 9.2.2 IDE
- 최근에는 개발 과정에서 필요한 모든 일을 처리할 수 있도록 만들어진 통합개발환경(IDE)을 사용한다.
- ex. 이클립스, 넷빈즈, IntelliJ IDEA 등

<br/>

## 9.2.3 SpringSource Tool Suite
- 최신 이클립스를 기반으로 주요한 스프링 지원 플러그인과 관련 도구를 모아서 스프링 개발에 최적화되도록 만들어진 IDE다.
- 👍 플러그인 방식을 지원하는 툴을 사용하면 원하는 기능을 필요에 따라 추가할 수 있다.
- 👎 각 플러그인과 이클립스의 버전을 호환되도록 계속 관리해야 한다. (플로그인 의존성 관리 이슈 🥹)
  - 스프링소스가 제공하는, 플러그인 조합이 완료된 STS를 사용하는 편이 유리하다.
 
- 이클립스 최신 버전과 이전 버전에 대해서 윈도우, 맥, 리눅스용으로 만들어진 설치 프로그램을 제공한다.

<br/>

### SpringIDE 플러그인
- SpringIDE는 스프링 개발에 유용한 기능을 제공하는 플러그인의 모음이다.
- SpringIDE가 제공하는 XML 설정파일 에디터를 이용하면 클래스 이름이나 참조하는 빈의 이름을 실시간으로 검증해서 오류를 확인해주기 때문에 오타로 인한 에러의 위험을 사전에 방지해준다.
- 클래스 이름이나 프로퍼티 이름을 자바 편집기 내의 자동완성 기능과 비슷하게 찾을 수 있게 해줘 편리하다.
  - **빈 클래스 이름 자동완성**
    - bean 태그의 class 애트리뷰트를 입력할 때 클래스 이름에 대한 자동완성을 지원한다.
    - 패키지 이름을 포함한 클래스 이름이 정확히 입력된다.
    - 빈의 프로퍼티를 등록할 때도 자동완성 기능을 사용할 수 있다.
    - ref 애트리뷰트로 다른 빈을 참조할 때도 자동완성 기능을 사용할 수 있다.
   
  - **빈 설정 오류검증 기능**
    - 실시간으로 컴파일 오류를 분석해서 바로 오류마크를 보여줘 문제가 있음을 확인시켜준다.
   
  - **프로젝트 생성, 설정파일 생성, 빈 등록 위저드**
    - XML 설정파일 생성 위저드는 번거로운 스키마 선언부를 손쉽게 추가하거나 수정할 수 있게 해준다.
    - 빈 설정파일 생성 위저드 중 사용할 네임스페이스와 스키마 버전을 선택할 수 있다.
   
  - **빈 의존관계 그래프**
    - SpringIDE는 XML 설정파일을 읽어서 자동으로 그래프를 그려준다.
      
      <img width="400" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/e127d7f7-7be3-45eb-87c4-ae3a225c14de">

      🔼 SpringIDE의 빈 의존관계 그래프<br/><br/>

  - **AOP 적용 대상 표시**
    - AJDT의 지원으로 SpringIDE는 포인트컷이 적용되는 대상 빈을 설정파일 안에서 한눈에 확인할 수 있도록 도와준다.
    - 빈 이름을 이용한 패턴은 메서드 시그니처를 이용한 포인트컷 표현식보다 만들기 쉽고 대상을 확인하기가 명확하다.
    - ex. 빈 이름을 이용한 포인트컷 표현식
      ```
      <aop:config>
        <aop:advisor advice-ref="transactionAdvice" pointcut="bean(*Service)" />
      </aop:config>
      ```
      - `Service`라는 이름으로 끝나는 모든 빈에 트랜잭션 어드바이스를 적용하는 AOP 설정이다.
      - 설정파일 편집기 화면 내에서 AOP 선언과 어드바이저가 적용될 대상인 빈 설정에 `둥근 화살표 모양의 마크`가 표시된다.
     
    - ex. execute()를 이용하도록 수정한 포인트컷
      ```
      <aop:config>
        <aop:advisor advice-ref="transactionAdvice" pointcut="execution(* *...service.*Service.*(..))" />
      </aop:config>
      ```
      - 트랜잭션 AOP가 SQL 서비스 빈에 적용되지 않도록 한다.
      - service 패키지 아래에 있는 Service로 이름이 끝나는 클래스만 적용하도록 수정되었다.
      - 설정파일 편집기 화면 내에서도 SqlService 빈 설정에 `둥근 화살표 모양의 마크`가 사라진 것을 확인할 수 있다.
     
    - AOP 마커를 보이게 하려면 프로젝트를 스프링 프로젝트로 만들고, 프로젝트 설정의 Spring-Bean Support 항목에 XML을 추가해줘야 한다.
   
  - **기타 지원 기능**
    - 일정한 규칙만 부여하면 자동와이어링과 같은 방법을 통해 많은 설정 내용을 생략하고 자동화할 수 있다.
   
<br/>

### STS 플러그인
- 스프링 개발과 설정파일 편집을 지원하는 SpringIDE에 더해서 스프링 애플리케이션의 서버 배치와 같은 추가 기능을 제공한다.
- tcServer, dmServer, Cloud Foundry 등의 기능을 제공한다.
- VMForce와 같은 VMWare 가상화와 클라우드 서비스에도 손쉽게 스프링 애플리케이션을 배치할 수 있도록 지원한다.
- 대시보드 화면도 STS 플러그인의 기능이다.
- 자주 발생하는 예외에 대한 지식베이스를 검색해볼 수 있는 기능도 제공한다.

<br/>

### 기타 플러그인
- **M2Eclipse**: Maven을 지원하는 이클립스 플러그인
- **AJDT**: Aspect Development Tool의 약자로, 이클립스에서 AspectJ AOP를 이용한 개발을 지원하는 편리한 툴
- **VMCI**: VMWare 서버 또는 워크스테이션과의 연동을 지원하는 플러그인
- **이클립스 표준 플러그인**: 웹 개발을 지원하는 WTP, EMP, Mylyn, DSDP 등이 있다.

<br/>

## 9.2.4 라이브러리 관리와 빌드 툴

### 라이브러리 관리의 어려움
- 스프링으로 만드는 프로젝트에 포함될 가능성이 있는 라이브러리의 종류는 수백여 개에 달할 것이다.
- 필요한 기능과 사용하기로 결정한 기술에 따라서 적절한 선택이 필요하다.
- 라이브러리 종류는 같지만 버전이 맞지 않으면 컴파일이 되지 않을 수 있고, 운이 나쁘면 컴파일은 정상적으로 되지만 운영 중 오류가 발생할 수 있다.
- 필요한 라이브러리의 조합을 만들다 보면 복잡한 의존관계 속에서 같은 라이브러리의 다른 버전이 동시에 필요해서 문제가 발생하기도 한다.
  
  <img width="600" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/642b5019-c04e-404a-89a1-d004eec079c8">

  🔼 버전이 다른 라이브러리의 문제
  - 이 문제를 풀 수 있는 가장 간단한 방법은 **재패키징**이다. (한쪽 버전의 클래스를 다른 패키지로 옮겨 서로 구별되는 클래스로 만들어주는 방법)
  - `jarjar`를 이용하면 간단한 명령으로 한 번에 복잡한 라이브러리 클래스를 모두 재패키징할 수 있다.
 
<br/>

### 라이브러리 선정
- **스프링 모듈**
  - 사용할 기능과 기술 목록이 모두 만들어졌으면 일단 스프링 모듈부터 선정한다.
  - 스프링의 모듈 사이에도 의존관계가 있다. 모듈 사이의 의존관계는 필수와 선택으로 나뉠 수 있다.
 
- **라이브러리**
  - 스프링의 각 모듈은 오픈소스 라이브러리 또는 표준 API를 필요로 하기도 하고, 경우에 따라 상용 제품의 라이브러리에 의존한다.
  - 불필요한 라이브러리는 처음부터 추가하지 않아야 하며, 사용 기술이나 기능이 변경돼서 불필요해진 라이브러리도 바로 제거해야 한다.
 
<br/>

### 빌드 툴과 라이브러리 관리
- 자동빌드 기능을 지원하는 IDE를 기본적으로 이용하면서 ANT나 Maven 같은 환경에 독립적인 빌드 툴을 함께 사용하는 것이 바람직하다.
- Maven은 단순 빌드 툴을 넘어 개발 과정에서 필요한 빌드, 테스트, 배치, 문서화, 리포팅 등의 다양한 작업을 지원한다.
  - POM이라고 불리는 프로젝트 모델 정보를 이용한다. (선언적임)
  - POM의 프로젝트 모델 정보로 만들어두면, 이를 참조해서 Maven에 미리 정해진 절차에 따라 빌드 또는 프로젝트 관리 작업을 진행할 수 있다.
  - 애플리케이션이 필요로 하는 의존 라이브러리를 선언해두기만 하면 원격 서버에서 이를 자동으로 다운로드 받아 사용할 수 있게 해준다.
 
- Maven은 전이적(transitive) 의존 라이브러리 추적 기능을 제공한다.
  - POM의 의존정보에 하나의 라이브러리를 지정하면, 지정된 라이브러리가 동작하는 데 필요한 여타 라이브러리까지 함께 다운로드해준다.
  - 프로젝트 파일의 크기도 줄어들고 코드 관리도 단순해진다.
  - 선택 라이브러리는 Maven의 의존 라이브러리 추적 기능의 적용을 받지 못한다. (사용하려면 명시적으로 POM에 선언해주어야 함)
  - 사내 로컬 Maven 레포지토리를 셋업하고 앞서 만든 common-deps POM 파일을 업로드한다. 이후 개별 프로젝트에 Maven POM 파일을 만들고 여기서 만든 common-deps POM 자체를 의존정보로 넣는다. 이렇게 해주면 전이적 의존관계 추적 기능에 의해 common-deps POM에 담긴 모든 라이브러리가 프로젝트에 자동으로 등록된다.
  - 처음 한 번과 새로운 스프링 버전이 등장했을 때만 다시 수고해주면 지속적으로 활용 가능한 효과적인 의존관계 관리체계와 툴을 가져갈 수 있다.
  - 의존 라이브러리 그룹의 활용

    <img width="600" alt="image" src="https://github.com/Team-Sopetit/server-spring-study/assets/55437339/18ecc1d3-38c0-4daa-9ac0-f76b6437d45a">

    - 3개의 미리 준비된 의존 라이브러리 그룹을 지정해서 애플리케이션의 설정을 만든다.
   
<br/>

### 스프링 모듈의 2가지 이름과 레포지토리

